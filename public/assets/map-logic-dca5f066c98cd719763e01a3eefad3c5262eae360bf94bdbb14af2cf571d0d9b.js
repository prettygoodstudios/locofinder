mapboxgl.accessToken="pk.eyJ1IjoicHJldHR5Z29vZHN0dWRpb3MiLCJhIjoiY2pkamx4aTZlMWt4dDJwbnF5a3ZmbTEzcyJ9.lu_9eqO1kmUMPf9LXU80yg";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/prettygoodstudios/cjdjnyk9047qy2rmm28tmk0m8"}),nav=new mapboxgl.NavigationControl;map.addControl(nav,"top-left"),$(document).on("turbolinks:load",function(){console.log("Hello World!"),fetch(ROOT_URL+"geo_json_api").then(function(o){return o.json()}).then(function(o){for(var e=0;e<o.length;e++){var a=document.createElement("div");a.className="marker";var n=new mapboxgl.Marker(a,{offset:[0,-35]}).setLngLat([o[e].coordinates[1],o[e].coordinates[0]]).addTo(map),t="<h3>"+o[e].title+"</h3>",l="<p>"+o[e].address+"</p>",r="<p>Average Rating: "+o[e].average_score+"</p>";0==o[e].average_score&&(r="");var s="<image class='popup-image' src='"+o[e].img_url+"'></image>",p="<a href='"+ROOT_URL+o[e].url+"' class='button' data-turbolinks='false'>More Info</a>",c=(new mapboxgl.Popup).setHTML(t+l+r+s+p);n.setPopup(c)}fetch("https://geoip-db.com/json/").then(function(o){return o.json()}).then(function(o){console.log("Hello World 2"),console.log(o),map.flyTo({center:[o.longitude,o.latitude],zoom:9})})})});